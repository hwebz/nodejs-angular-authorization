{"version":3,"sources":["app.min.js"],"names":["config","$routeProvider","$locationProvider","when","templateUrl","controller","controllerAs","otherwise","redirectTo","html5Mode","run","$rootScope","$location","authentication","$on","event","nextRoute","currentRoute","path","isLoggedIn","app","angular","module","homeCtrl","console","log","profileCtrl","meanData","$timeout","vm","this","user","isLoading","getProfile","success","data","error","e","$inject","$http","$window","saveToken","token","localStorage","getToken","payload","split","atob","JSON","parse","exp","Date","now","currentUser","email","name","register","post","login","logout","removeItem","service","get","headers","Authorization","loginCtrl","credentials","password","onSubmit","err","then","registerCtrl","navigationCtrl","navigation","restrict","directive"],"mappings":"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","file":"app.min.js","sourcesContent":["(function() {\r\n\t'use strict';\r\n\t\r\n\tvar app = angular.module('meanApp', ['ngRoute']);\r\n\r\n\tfunction config($routeProvider, $locationProvider) {\r\n\t\t$routeProvider\r\n\t\t\t.when('/', {\r\n\t\t\t\ttemplateUrl: 'home/home.view.html',\r\n\t\t\t\tcontroller: 'homeCtrl',\r\n\t\t\t\tcontrollerAs: 'vm'\r\n\t\t\t})\r\n\t\t\t.when('/register', {\r\n\t\t\t\ttemplateUrl: '/auth/register/register.view.html',\r\n\t\t\t\tcontroller: 'registerCtrl',\r\n\t\t\t\tcontrollerAs: 'vm'\r\n\t\t\t})\r\n\t\t\t.when('/login', {\r\n\t\t\t\ttemplateUrl: '/auth/login/login.view.html',\r\n\t\t\t\tcontroller: 'loginCtrl',\r\n\t\t\t\tcontrollerAs: 'vm'\r\n\t\t\t})\r\n\t\t\t.when('/profile', {\r\n\t\t\t\ttemplateUrl: '/profile/profile.view.html',\r\n\t\t\t\tcontroller: 'profileCtrl',\r\n\t\t\t\tcontrollerAs: 'vm'\r\n\t\t\t})\r\n\t\t\t.otherwise({redirectTo: '/'});\r\n\r\n\t\t\t// use the HTML5 history API\r\n\t\t\t$locationProvider.html5Mode(true);\r\n\t}\r\n\r\n\tfunction run($rootScope, $location, authentication) {\r\n\t\t$rootScope.$on('$routeChangeStart', function(event, nextRoute, currentRoute) {\r\n\t\t\tif ($location.path() === '/profile' && !authentication.isLoggedIn()) {\r\n\t\t\t\t$location.path('/');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tapp\r\n\t\t.config(['$routeProvider', '$locationProvider', config])\r\n\t\t.run(['$rootScope', '$location', 'authentication', run]);\r\n})();\n(function() {\r\n\t'use strict';\r\n\t\r\n\tvar app = angular.module('meanApp');\r\n\r\n\tfunction homeCtrl() {\r\n\t\tconsole.log('Home controller is running');\r\n\t}\r\n\r\n\tapp.controller('homeCtrl', homeCtrl);\r\n\r\n})();\n(function() {\r\n\t'use strict';\r\n\t\r\n\tvar app = angular.module('meanApp');\r\n\r\n\tfunction profileCtrl($location, meanData, $timeout) {\r\n\t\tvar vm = this;\r\n\r\n\t\tvm.user = {};\r\n\t\tvm.isLoading = true;\r\n\t\t\r\n\t\tmeanData.getProfile()\r\n\t\t\t.success(function(data) {\r\n\t\t\t\tvm.user = data;\r\n\t\t\t\tvm.isLoading = false;\r\n\t\t\t})\r\n\t\t\t.error(function(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprofileCtrl.$inject = ['$location', 'meanData', '$timeout'];\r\n\tapp.controller('profileCtrl', profileCtrl);\r\n\r\n})();\n(function() {\r\n\t'use strict';\r\n\t\r\n\tvar app = angular.module('meanApp');\r\n\r\n\tfunction authentication($http, $window) {\r\n\t\tvar saveToken = function(token) {\r\n\t\t\t$window.localStorage['mean-token'] = token;\r\n\t\t}\r\n\r\n\t\tvar getToken = function() {\r\n\t\t\treturn $window.localStorage['mean-token'];\r\n\t\t}\r\n\r\n\t\tvar isLoggedIn = function() {\r\n\t\t\tvar token = getToken();\r\n\t\t\tvar payload;\r\n\r\n\t\t\tif (token) {\r\n\t\t\t\tpayload = token.split('.')[1];\r\n\t\t\t\tpayload = $window.atob(payload);\r\n\t\t\t\tpayload = JSON.parse(payload);\r\n\r\n\t\t\t\treturn payload.exp > Date.now() / 1000;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar currentUser = function() {\r\n\t\t\tif(isLoggedIn()) {\r\n\t\t\t\tvar token = getToken();\r\n\t\t\t\tvar payload = token.split('.')[1];\r\n\t\t\t\tpayload = $window.atob(payload);\r\n\t\t\t\tpayload = JSON.parse(payload);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\temail: payload.email,\r\n\t\t\t\t\tname: payload.name\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar register = function(user) {\r\n\t\t\treturn $http.post('/api/register', user).success(function(data) {\r\n\t\t\t\tsaveToken(data.token);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tvar login = function(user) {\r\n\t\t\treturn $http.post('/api/login', user).success(function(data) {\r\n\t\t\t\tsaveToken(data.token);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tvar logout = function() {\r\n\t\t\t$window.localStorage.removeItem('mean-token');\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tcurrentUser: currentUser,\r\n\t\t\tsaveToken: saveToken,\r\n\t\t\tgetToken: getToken,\r\n\t\t\tisLoggedIn: isLoggedIn,\r\n\t\t\tregister: register,\r\n\t\t\tlogin: login,\r\n\t\t\tlogout: logout\r\n\t\t};\r\n\t}\r\n\tauthentication.$inject = ['$http', '$window'];\r\n\r\n\tapp.service('authentication', authentication);\r\n\r\n})();\n(function() {\r\n\t'use strict';\r\n\t\r\n\tvar app = angular.module('meanApp');\r\n\r\n\tfunction meanData($http, authentication) {\r\n\t\tvar getProfile = function() {\r\n\t\t\treturn $http.get('/api/profile', {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: 'Bearer ' + authentication.getToken()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tgetProfile: getProfile\r\n\t\t}\r\n\t}\r\n\tmeanData.$inject = ['$http', 'authentication'];\r\n\r\n\tapp.service('meanData', meanData);\r\n\r\n})();\n(function() {\r\n\t'use strict';\r\n\t\r\n\tvar app = angular.module('meanApp');\r\n\r\n\tfunction loginCtrl($location, authentication) {\r\n\t\tvar vm = this;\r\n\r\n\t\tvm.credentials = {\r\n\t\t\temail: '',\r\n\t\t\tpassword: ''\r\n\t\t};\r\n\t\tvm.error = '';;\r\n\r\n\t\tvm.onSubmit = function() {\r\n\t\t\tauthentication\r\n\t\t\t\t.login(vm.credentials)\r\n\t\t\t\t.error(function(err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\tvm.error = err;\r\n\t\t\t\t})\r\n\t\t\t\t.then(function() {\r\n\t\t\t\t\t$location.path('profile');\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\tloginCtrl.$inject = ['$location', 'authentication'];\r\n\r\n\tapp.controller('loginCtrl', loginCtrl);\r\n\r\n})();\n(function() {\r\n\t'use strict';\r\n\t\r\n\tvar app = angular.module('meanApp');\r\n\r\n\tfunction registerCtrl($location, authentication) {\r\n\t\tvar vm = this;\r\n\r\n\t\tvm.credentials = {\r\n\t\t\tname: \"\",\r\n\t\t\temail: \"\",\r\n\t\t\tpassword: \"\"\r\n\t\t};\r\n\r\n\t\tvm.onSubmit = function() {\r\n\t\t\tconsole.log(\"Submitting registration\");\r\n\t\t\tauthentication\r\n\t\t\t\t.register(vm.credentials)\r\n\t\t\t\t.error(function(err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t})\r\n\t\t\t\t.then(function() {\r\n\t\t\t\t\t$location.path('profile');\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\tregisterCtrl.$inject = ['$location', 'authentication'];\r\n\r\n\tapp.controller('registerCtrl', registerCtrl);\r\n\r\n})();\n(function() {\r\n\t'use strict';\r\n\t\r\n\tvar app = angular.module('meanApp');\r\n\r\n\tfunction navigationCtrl($location, authentication) {\r\n\t\tvar vm = this;\r\n\r\n\t\tvm.isLoggedIn = authentication.isLoggedIn();\r\n\r\n\t\tvm.currentUser = authentication.currentUser();\r\n\r\n\t\tvm.logout = function() {\r\n\t\t\tauthentication.logout();\r\n\t\t\t$location.path('login');\r\n\t\t}\r\n\t}\r\n\tnavigationCtrl.$inject = ['$location', 'authentication'];\r\n\tapp.controller('navigationCtrl', navigationCtrl);\r\n\r\n})();\n(function() {\r\n\r\n\tvar app = angular.module('meanApp');\r\n\r\n\tfunction navigation() {\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\ttemplateUrl: '/common/directives/navigation/navigation.template.html',\r\n\t\t\tcontroller: 'navigationCtrl as navm'\r\n\t\t};\r\n\t}\r\n\r\n\tapp.directive('navigation', navigation);\r\n\r\n})();"]}